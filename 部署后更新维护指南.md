# éƒ¨ç½²åæ›´æ–°ç»´æŠ¤æŒ‡å—

> æœ¬æŒ‡å—è¯´æ˜åœ¨æŒ‰ç…§ã€Šå®Œæ•´éƒ¨ç½²æŒ‡å—ã€‹å®Œæˆåˆæ¬¡éƒ¨ç½²åï¼Œå¦‚ä½•å®‰å…¨åœ°æ›´æ–°åŠŸèƒ½ã€ä¿®å¤Bugæˆ–ä¿®æ”¹é¡µé¢ã€‚
> 
> **é€‚ç”¨åœºæ™¯**ï¼šå·²éƒ¨ç½²åˆ° Vercel(å‰ç«¯) + Render(åç«¯) + Supabase(æ•°æ®åº“) çš„é¡¹ç›®

---

## ğŸ“‹ ç›®å½•

1. [æ›´æ–°å‰å‡†å¤‡](#1-æ›´æ–°å‰å‡†å¤‡)
2. [å‰ç«¯æ›´æ–°ï¼ˆVercelï¼‰](#2-å‰ç«¯æ›´æ–°vercel)
3. [åç«¯æ›´æ–°ï¼ˆRenderï¼‰](#3-åç«¯æ›´æ–°render)
4. [æ•°æ®åº“æ›´æ–°ï¼ˆSupabaseï¼‰](#4-æ•°æ®åº“æ›´æ–°supabase)
5. [é…ç½®æ›´æ–°](#5-é…ç½®æ›´æ–°)
6. [å¸¸è§æ›´æ–°åœºæ™¯](#6-å¸¸è§æ›´æ–°åœºæ™¯)
7. [å®‰å…¨å¤‡ä»½](#7-å®‰å…¨å¤‡ä»½)
8. [æ•…éšœæ’æŸ¥](#8-æ•…éšœæ’æŸ¥)

---

## 1. æ›´æ–°å‰å‡†å¤‡

### 1.1 ç¡®è®¤å½“å‰éƒ¨ç½²çŠ¶æ€

åœ¨æ›´æ–°å‰ï¼Œå…ˆç¡®è®¤å„æœåŠ¡è¿è¡Œæ­£å¸¸ï¼š

```bash
# æ£€æŸ¥å‰ç«¯
https://aigcguard.zsypioneer.cn

# æ£€æŸ¥åç«¯API
https://api-aigcguard.zsypioneer.cn/health

# æ£€æŸ¥æ•°æ®åº“ï¼ˆSupabase Dashboardï¼‰
https://supabase.com/dashboard
```

### 1.2 å‡†å¤‡æ›´æ–°æ¸…å•

å»ºè®®åˆ›å»ºä¸€ä¸ªç®€å•çš„æ›´æ–°è®°å½•æ–‡ä»¶ `update_log.md`ï¼š

```markdown
## æ›´æ–°è®°å½•

### 2024-02-22 æ›´æ–°
- æ›´æ–°å†…å®¹ï¼šæ·»åŠ ä¾µæƒä¸¾æŠ¥åŠŸèƒ½
- å½±å“èŒƒå›´ï¼šåç«¯API + å‰ç«¯é¡µé¢
- æ•°æ®åº“å˜æ›´ï¼šæ–°å¢ infringement_reports è¡¨
- æµ‹è¯•ç»“æœï¼šâœ… é€šè¿‡
- æ›´æ–°äººï¼šxxx
```

### 1.3 æœ¬åœ°æµ‹è¯•

**é‡è¦ï¼šä»»ä½•æ›´æ–°éƒ½å¿…é¡»å…ˆåœ¨æœ¬åœ°æµ‹è¯•é€šè¿‡ï¼**

```bash
# 1. æ‹‰å–æœ€æ–°ä»£ç ï¼ˆå¦‚æœæ˜¯å›¢é˜Ÿåä½œï¼‰
git pull origin main

# 2. æœ¬åœ°å¯åŠ¨åç«¯
cd d:\äº’è”ç½‘+é¡¹ç›®å¼€å‘\01AIGCæ•°å­—å†…å®¹æŒ‡çº¹åµŒå…¥ä¸ä¾µæƒå…¨ç½‘ç›‘æµ‹å¹³å°
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# 3. æœ¬åœ°å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
cd web_app
npm run dev

# 4. æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
# - æ°´å°åµŒå…¥
# - æ°´å°æ£€æµ‹
# - æ–°åŠŸèƒ½æµ‹è¯•
```

---

## 2. å‰ç«¯æ›´æ–°ï¼ˆVercelï¼‰

### 2.1 è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

å¦‚æœä½ å·²ç»å°†é¡¹ç›®æ¨é€åˆ° GitHubï¼ŒVercel ä¼šè‡ªåŠ¨éƒ¨ç½²ï¼š

```bash
# 1. æäº¤ä»£ç åˆ° GitHub
git add .
git commit -m "feat: æ·»åŠ ä¾µæƒä¸¾æŠ¥åŠŸèƒ½"
git push origin main

# 2. Vercel ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°æ¨é€å¹¶å¼€å§‹éƒ¨ç½²
# 3. è®¿é—® Vercel Dashboard æŸ¥çœ‹éƒ¨ç½²è¿›åº¦
```

**Vercel Dashboard åœ°å€**ï¼šhttps://vercel.com/dashboard

### 2.2 æ‰‹åŠ¨éƒ¨ç½²

å¦‚æœæœªä½¿ç”¨ GitHub è‡ªåŠ¨éƒ¨ç½²ï¼š

```bash
# 1. å®‰è£… Vercel CLI
npm i -g vercel

# 2. ç™»å½•
vercel login

# 3. è¿›å…¥å‰ç«¯ç›®å½•
cd web_app

# 4. éƒ¨ç½²
vercel --prod

# 5. ç¡®è®¤åŸŸå
# è¾“å…¥åŸŸåï¼šaigcguard.zsypioneer.cn
```

### 2.3 å‰ç«¯æ›´æ–°æ£€æŸ¥æ¸…å•

æ›´æ–°åç¡®è®¤ä»¥ä¸‹åŠŸèƒ½æ­£å¸¸ï¼š

- [ ] é¡µé¢èƒ½æ­£å¸¸åŠ è½½
- [ ] API è¯·æ±‚èƒ½æ­£å¸¸å‘é€åˆ°åç«¯
- [ ] æ–°æ·»åŠ çš„é¡µé¢/ç»„ä»¶æ˜¾ç¤ºæ­£å¸¸
- [ ] ç§»åŠ¨ç«¯é€‚é…æ­£å¸¸

### 2.4 å¸¸è§å‰ç«¯æ›´æ–°

| æ›´æ–°ç±»å‹ | æ“ä½œæ­¥éª¤ | æ³¨æ„äº‹é¡¹ |
|---------|---------|---------|
| **ä¿®æ”¹é¡µé¢æ ·å¼** | ä¿®æ”¹ `web_app/src/*.css` â†’ æäº¤GitHub | æ£€æŸ¥å“åº”å¼å¸ƒå±€ |
| **æ·»åŠ æ–°é¡µé¢** | åˆ›å»ºç»„ä»¶ â†’ æ·»åŠ åˆ°è·¯ç”± â†’ æäº¤ | æ›´æ–°å¯¼èˆªèœå• |
| **ä¿®æ”¹APIè°ƒç”¨** | ä¿®æ”¹ `web_app/src/lib/api.ts` | ç¡®è®¤åç«¯APIå·²æ›´æ–° |
| **æ›´æ–°ä¾èµ–** | `npm update` â†’ æœ¬åœ°æµ‹è¯• â†’ æäº¤ | æ£€æŸ¥å…¼å®¹æ€§ |
| **ä¿®æ”¹é™æ€èµ„æº** | æ›¿æ¢ `web_app/public/` ä¸‹æ–‡ä»¶ | æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ |

---

## 3. åç«¯æ›´æ–°ï¼ˆRenderï¼‰

### 3.1 è‡ªåŠ¨éƒ¨ç½²ï¼ˆGitHubé›†æˆï¼‰

å¦‚æœä½ é…ç½®äº† GitHub è‡ªåŠ¨éƒ¨ç½²ï¼š

```bash
# 1. æäº¤ä»£ç 
git add .
git commit -m "feat: æ·»åŠ ä¾µæƒæ£€æµ‹API"
git push origin main

# 2. Render è‡ªåŠ¨æ£€æµ‹å¹¶å¼€å§‹éƒ¨ç½²
# 3. æŸ¥çœ‹ Render Dashboard ç¡®è®¤çŠ¶æ€
```

**Render Dashboard åœ°å€**ï¼šhttps://dashboard.render.com

### 3.2 æ‰‹åŠ¨éƒ¨ç½²

å¦‚æœæ²¡æœ‰é…ç½®è‡ªåŠ¨éƒ¨ç½²ï¼š

```bash
# æ–¹æ³•1ï¼šé€šè¿‡ Render Dashboard
# 1. ç™»å½• https://dashboard.render.com
# 2. é€‰æ‹©ä½ çš„æœåŠ¡ï¼ˆå¦‚ aigcguard-apiï¼‰
# 3. ç‚¹å‡» "Manual Deploy" â†’ "Deploy Latest Commit"

# æ–¹æ³•2ï¼šé€šè¿‡ Render CLIï¼ˆå¯é€‰ï¼‰
# å‚è€ƒ Render CLI æ–‡æ¡£
```

### 3.3 åç«¯æ›´æ–°ç‰¹æ®Šæ³¨æ„äº‹é¡¹

#### âš ï¸ é‡è¦ï¼šUptimeRobot é…ç½®

å¦‚æœä½ ä½¿ç”¨ UptimeRobot é˜²æ­¢ Render ä¼‘çœ ï¼Œæ›´æ–°æ—¶ï¼š

```bash
# 1. æ›´æ–°å‰ï¼šUptimeRobot ä¿æŒå¼€å¯
# ï¼ˆæ›´æ–°æœŸé—´ Render ä¼šé‡å¯ï¼ŒUptimeRobot ä¼šå¿«é€Ÿå”¤é†’ï¼‰

# 2. æ›´æ–°åï¼šæ£€æŸ¥ UptimeRobot æ—¥å¿—
# ç¡®è®¤æœåŠ¡å·²æ¢å¤æ­£å¸¸å“åº”
```

#### âš ï¸ é‡è¦ï¼šä¾èµ–æ›´æ–°

å¦‚æœæ·»åŠ äº†æ–°çš„ Python ä¾èµ–ï¼š

```bash
# 1. æ›´æ–° requirements.txt
pip freeze > requirements.txt

# 2. æäº¤ä»£ç 
git add requirements.txt
git commit -m "deps: æ·»åŠ  Pillow ä¾èµ–"
git push

# 3. Render ä¼šè‡ªåŠ¨å®‰è£…æ–°ä¾èµ–
```

#### âš ï¸ é‡è¦ï¼šç¯å¢ƒå˜é‡

å¦‚æœæ–°å¢äº†ç¯å¢ƒå˜é‡ï¼š

```bash
# 1. åœ¨ Render Dashboard æ·»åŠ 
# Dashboard â†’ ä½ çš„æœåŠ¡ â†’ Environment â†’ Add Environment Variable

# 2. é‡æ–°éƒ¨ç½²æœåŠ¡

# 3. ç¡®è®¤å˜é‡ç”Ÿæ•ˆï¼ˆæŸ¥çœ‹æ—¥å¿—ï¼‰
```

### 3.4 åç«¯æ›´æ–°æ£€æŸ¥æ¸…å•

- [ ] `/health` ç«¯ç‚¹è¿”å›æ­£å¸¸
- [ ] API å“åº”æ—¶é—´æ­£å¸¸ï¼ˆ< 2ç§’ï¼‰
- [ ] æ•°æ®åº“è¿æ¥æ­£å¸¸
- [ ] DeepSeek API è°ƒç”¨æ­£å¸¸ï¼ˆå¦‚é€‚ç”¨ï¼‰
- [ ] æ–°åŠŸèƒ½ API æµ‹è¯•é€šè¿‡

### 3.5 å¸¸è§åç«¯æ›´æ–°

| æ›´æ–°ç±»å‹ | æ“ä½œæ­¥éª¤ | æ³¨æ„äº‹é¡¹ |
|---------|---------|---------|
| **æ·»åŠ æ–°APIç«¯ç‚¹** | ä¿®æ”¹ `app/api/endpoints/*.py` â†’ æäº¤ | æ£€æŸ¥è·¯ç”±æ³¨å†Œ |
| **ä¿®æ”¹ä¸šåŠ¡é€»è¾‘** | ä¿®æ”¹ `app/service/*.py` â†’ æäº¤ | å•å…ƒæµ‹è¯•é€šè¿‡ |
| **æ–°å¢æ•°æ®åº“è¡¨** | åˆ›å»º Migration â†’ æ‰§è¡Œ â†’ æäº¤ | å…ˆå¤‡ä»½æ•°æ® |
| **æ›´æ–°é…ç½®** | ä¿®æ”¹ `app/core/config.py` | åŒæ­¥æ›´æ–°ç¯å¢ƒå˜é‡ |
| **ä¿®å¤Bug** | ä¿®æ”¹ä»£ç  â†’ æœ¬åœ°æµ‹è¯• â†’ æäº¤ | è®°å½•ä¿®å¤å†…å®¹ |

---

## 4. æ•°æ®åº“æ›´æ–°ï¼ˆSupabaseï¼‰

### 4.1 æ·»åŠ æ–°è¡¨

å¦‚æœéœ€è¦æ·»åŠ æ–°è¡¨ï¼ˆå¦‚ `infringement_reports`ï¼‰ï¼š

```sql
-- æ–¹æ³•1ï¼šé€šè¿‡ Supabase Dashboard SQL Editor
-- 1. ç™»å½• https://supabase.com/dashboard
-- 2. é€‰æ‹©ä½ çš„é¡¹ç›®
-- 3. å·¦ä¾§èœå• â†’ SQL Editor
-- 4. ç²˜è´´ SQL è¯­å¥å¹¶æ‰§è¡Œ

-- ç¤ºä¾‹ï¼šæ·»åŠ ä¾µæƒä¸¾æŠ¥è¡¨
CREATE TABLE IF NOT EXISTS infringement_reports (
    id SERIAL PRIMARY KEY,
    report_id VARCHAR(255) UNIQUE NOT NULL,
    reporter_id VARCHAR(255) NOT NULL,
    reporter_name VARCHAR(255),
    my_asset_id INTEGER NOT NULL,
    infringing_url TEXT NOT NULL,
    description TEXT,
    similarity_score FLOAT,
    confidence_level VARCHAR(100),
    is_infringing BOOLEAN DEFAULT FALSE,
    status VARCHAR(50) DEFAULT 'pending_review',
    analysis_result JSONB,
    dmca_notice TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- æ·»åŠ ç´¢å¼•
CREATE INDEX idx_infringement_reporter ON infringement_reports(reporter_id);
CREATE INDEX idx_infringement_status ON infringement_reports(status);
```

### 4.2 ä¿®æ”¹ç°æœ‰è¡¨

```sql
-- æ·»åŠ æ–°åˆ—
ALTER TABLE watermarked_assets 
ADD COLUMN IF NOT EXISTS blockchain_tx_hash VARCHAR(255);

-- ä¿®æ”¹åˆ—ç±»å‹ï¼ˆè°¨æ…æ“ä½œï¼‰
ALTER TABLE profiles 
ALTER COLUMN quota_used TYPE INTEGER;

-- æ·»åŠ çº¦æŸ
ALTER TABLE infringement_reports 
ADD CONSTRAINT chk_similarity CHECK (similarity_score >= 0 AND similarity_score <= 100);
```

### 4.3 æ•°æ®è¿ç§»

å¦‚æœéœ€è¦è¿ç§»æ•°æ®ï¼š

```sql
-- ç¤ºä¾‹ï¼šå°†æ—§è¡¨æ•°æ®è¿ç§»åˆ°æ–°è¡¨
INSERT INTO new_table (col1, col2)
SELECT col1, col2 FROM old_table;

-- æˆ–è€…ä½¿ç”¨ Supabase çš„å¯¼å‡º/å¯¼å…¥åŠŸèƒ½
-- Dashboard â†’ Table Editor â†’ é€‰æ‹©è¡¨ â†’ Export â†’ Import
```

### 4.4 æ•°æ®åº“æ›´æ–°æ£€æŸ¥æ¸…å•

- [ ] SQL è¯­å¥åœ¨æœ¬åœ°æµ‹è¯•é€šè¿‡
- [ ] å¤‡ä»½äº†é‡è¦æ•°æ®ï¼ˆå¯é€‰ä½†å»ºè®®ï¼‰
- [ ] æ–°è¡¨/å­—æ®µåœ¨åº”ç”¨ä¸­èƒ½æ­£å¸¸è¯»å†™
- [ ] æ—§æ•°æ®å…¼å®¹ï¼ˆå¦‚æœ‰å¿…è¦ï¼‰
- [ ] ç´¢å¼•æ·»åŠ æˆåŠŸï¼ˆæå‡æŸ¥è¯¢æ€§èƒ½ï¼‰

---

## 5. é…ç½®æ›´æ–°

### 5.1 ç¯å¢ƒå˜é‡æ›´æ–°

#### Render åç«¯ç¯å¢ƒå˜é‡

```bash
# 1. ç™»å½• Render Dashboard
# 2. é€‰æ‹©ä½ çš„æœåŠ¡
# 3. Environment â†’ Add/Edit Variables

# ç¤ºä¾‹ï¼šæ·»åŠ æ–°çš„ API Key
Key: NEW_SERVICE_API_KEY
Value: your-api-key-here
```

#### Vercel å‰ç«¯ç¯å¢ƒå˜é‡

```bash
# 1. ç™»å½• Vercel Dashboard
# 2. é€‰æ‹©ä½ çš„é¡¹ç›®
# 3. Settings â†’ Environment Variables

# ç¤ºä¾‹ï¼šæ›´æ–° API åœ°å€
Key: VITE_API_BASE_URL
Value: https://api-aigcguard.zsypioneer.cn
```

#### Supabase é…ç½®

```bash
# 1. ç™»å½• Supabase Dashboard
# 2. Settings â†’ API â†’ å¤åˆ¶æ–°çš„ URL å’Œ Key

# 3. æ›´æ–° Render ç¯å¢ƒå˜é‡
SUPABASE_URL=your-new-url
SUPABASE_KEY=your-new-key
```

### 5.2 é…ç½®æ–‡ä»¶æ›´æ–°

å¦‚æœéœ€è¦æ›´æ–°ä»£ç ä¸­çš„é…ç½®ï¼š

```python
# app/core/config.py
class Settings:
    # æ·»åŠ æ–°é…ç½®é¡¹
    NEW_FEATURE_ENABLED: bool = True  # åŠŸèƒ½å¼€å…³
    NEW_FEATURE_LIMIT: int = 100      # é™åˆ¶æ•°é‡
```

---

## 6. å¸¸è§æ›´æ–°åœºæ™¯

### åœºæ™¯1ï¼šæ·»åŠ æ–°åŠŸèƒ½æ¨¡å—

ä»¥åˆšæ‰æ·»åŠ çš„"ä¾µæƒä¸¾æŠ¥"åŠŸèƒ½ä¸ºä¾‹ï¼š

```bash
# æ­¥éª¤1ï¼šæœ¬åœ°å¼€å‘
# - åˆ›å»º app/service/infringement_service.py
# - æ·»åŠ  API ç«¯ç‚¹åˆ° app/api/endpoints/watermark.py
# - æœ¬åœ°æµ‹è¯•é€šè¿‡

# æ­¥éª¤2ï¼šæ•°æ®åº“å‡†å¤‡
# - åœ¨ Supabase SQL Editor æ‰§è¡Œå»ºè¡¨è¯­å¥
# - ç¡®è®¤è¡¨åˆ›å»ºæˆåŠŸ

# æ­¥éª¤3ï¼šæäº¤ä»£ç 
git add .
git commit -m "feat: æ·»åŠ ä¾µæƒä¸¾æŠ¥åŠŸèƒ½ï¼ˆç®€åŒ–ç‰ˆæ–¹æ¡ˆAï¼‰"
git push origin main

# æ­¥éª¤4ï¼šç­‰å¾…è‡ªåŠ¨éƒ¨ç½²
# - Vercel è‡ªåŠ¨éƒ¨ç½²å‰ç«¯ï¼ˆå¦‚æœ‰å‰ç«¯ä¿®æ”¹ï¼‰
# - Render è‡ªåŠ¨éƒ¨ç½²åç«¯

# æ­¥éª¤5ï¼šéªŒè¯
# - è®¿é—® https://api-aigcguard.zsypioneer.cn/health
# - æµ‹è¯•æ–°åŠŸèƒ½ API
# - æŸ¥çœ‹ Render æ—¥å¿—ç¡®è®¤æ— é”™è¯¯
```

### åœºæ™¯2ï¼šä¿®å¤ç”Ÿäº§ç¯å¢ƒBug

```bash
# æ­¥éª¤1ï¼šç´§æ€¥ä¿®å¤
# - ä¿®æ”¹ä»£ç 
# - æœ¬åœ°å¿«é€Ÿæµ‹è¯•

# æ­¥éª¤2ï¼šæäº¤ä¿®å¤
git add .
git commit -m "fix: ä¿®å¤xxxé—®é¢˜"
git push origin main

# æ­¥éª¤3ï¼šç›‘æ§éƒ¨ç½²
# - æŸ¥çœ‹ Render Dashboard éƒ¨ç½²çŠ¶æ€
# - ç¡®è®¤æœåŠ¡æ¢å¤

# æ­¥éª¤4ï¼šéªŒè¯ä¿®å¤
# - æµ‹è¯•ä¿®å¤çš„åŠŸèƒ½ç‚¹
```

### åœºæ™¯3ï¼šæ›´æ–°å‰ç«¯é¡µé¢æ ·å¼

```bash
# æ­¥éª¤1ï¼šä¿®æ”¹æ ·å¼æ–‡ä»¶
# web_app/src/App.css

# æ­¥éª¤2ï¼šæœ¬åœ°é¢„è§ˆ
npm run dev

# æ­¥éª¤3ï¼šæäº¤
git add web_app/src/App.css
git commit -m "style: ä¼˜åŒ–æ£€æµ‹ç»“æœæ˜¾ç¤ºæ ·å¼"
git push

# æ­¥éª¤4ï¼šVercel è‡ªåŠ¨éƒ¨ç½²
# - çº¦ 1-2 åˆ†é’Ÿåç”Ÿæ•ˆ
# - è®¿é—®å‰ç«¯æŸ¥çœ‹æ•ˆæœ
```

### åœºæ™¯4ï¼šæ·»åŠ æ–°çš„ API ç«¯ç‚¹

```python
# æ­¥éª¤1ï¼šåˆ›å»ºæœåŠ¡ç«¯ç‚¹
# app/api/endpoints/new_feature.py

# æ­¥éª¤2ï¼šæ³¨å†Œè·¯ç”±
# app/main.py ä¸­æ·»åŠ 
app.include_router(new_feature.router, prefix="/api/new-feature")

# æ­¥éª¤3ï¼šæœ¬åœ°æµ‹è¯•
curl http://localhost:8000/api/new-feature/test

# æ­¥éª¤4ï¼šæäº¤éƒ¨ç½²
git add .
git commit -m "feat: æ·»åŠ xxxåŠŸèƒ½API"
git push
```

### åœºæ™¯5ï¼šæ›´æ–°ä¾èµ–ç‰ˆæœ¬

```bash
# å‰ç«¯ä¾èµ–æ›´æ–°
cd web_app
npm update axios
npm install new-package

# æµ‹è¯•
npm run dev

# æäº¤
git add package.json package-lock.json
git commit -m "deps: æ›´æ–° axios åˆ° v1.6.0"
git push

# åç«¯ä¾èµ–æ›´æ–°
pip install --upgrade some-package
pip freeze > requirements.txt

git add requirements.txt
git commit -m "deps: å‡çº§ some-package"
git push
```

---

## 7. å®‰å…¨å¤‡ä»½

### 7.1 ä»£ç å¤‡ä»½

```bash
# ç¡®ä¿ä»£ç å·²æ¨é€åˆ° GitHub
git push origin main

# åˆ›å»ºæ ‡ç­¾ï¼ˆé‡è¦ç‰ˆæœ¬ï¼‰
git tag -a v1.1.0 -m "ç‰ˆæœ¬1.1.0ï¼šæ·»åŠ ä¾µæƒä¸¾æŠ¥åŠŸèƒ½"
git push origin v1.1.0
```

### 7.2 æ•°æ®åº“å¤‡ä»½

```bash
# æ–¹æ³•1ï¼šSupabase Dashboard å¯¼å‡º
# Dashboard â†’ Database â†’ Backup & Restore

# æ–¹æ³•2ï¼šä½¿ç”¨ pg_dumpï¼ˆéœ€å®‰è£… PostgreSQL å®¢æˆ·ç«¯ï¼‰
pg_dump -h your-db-host -U postgres your-db-name > backup_$(date +%Y%m%d).sql
```

### 7.3 é…ç½®æ–‡ä»¶å¤‡ä»½

```bash
# è®°å½•ç¯å¢ƒå˜é‡
echo "SUPABASE_URL=$SUPABASE_URL" > .env.backup
echo "DEEPSEEK_API_KEY=***" >> .env.backup
# ä¿å­˜åˆ°å®‰å…¨ä½ç½®ï¼ˆä¸è¦æäº¤åˆ°Gitï¼ï¼‰
```

---

## 8. æ•…éšœæ’æŸ¥

### 8.1 éƒ¨ç½²å¤±è´¥æ’æŸ¥

#### Render éƒ¨ç½²å¤±è´¥

```bash
# 1. æŸ¥çœ‹ Render Dashboard â†’ Logs
# å¸¸è§é”™è¯¯ï¼š
# - ä¾èµ–å®‰è£…å¤±è´¥ â†’ æ£€æŸ¥ requirements.txt
# - å¯åŠ¨å‘½ä»¤é”™è¯¯ â†’ æ£€æŸ¥ Render Dashboard çš„ Start Command
# - ç«¯å£ç»‘å®šå¤±è´¥ â†’ ç¡®è®¤ä½¿ç”¨ 0.0.0.0:10000

# 2. æœ¬åœ°å¤ç°
pip install -r requirements.txt
python -m uvicorn app.main:app --host 0.0.0.0 --port 8000

# 3. æ£€æŸ¥ç¯å¢ƒå˜é‡
# Render Dashboard â†’ Environment â†’ ç¡®è®¤æ‰€æœ‰å˜é‡å·²è®¾ç½®
```

#### Vercel éƒ¨ç½²å¤±è´¥

```bash
# 1. æŸ¥çœ‹ Vercel Dashboard â†’ Deployments â†’ å¤±è´¥éƒ¨ç½²çš„è¯¦æƒ…

# 2. å¸¸è§é”™è¯¯ï¼š
# - æ„å»ºå¤±è´¥ â†’ æ£€æŸ¥ build è„šæœ¬
# - ç±»å‹é”™è¯¯ â†’ TypeScript æ£€æŸ¥
# - ä¾èµ–ç¼ºå¤± â†’ npm install

# 3. æœ¬åœ°æ„å»ºæµ‹è¯•
cd web_app
npm run build
```

### 8.2 åŠŸèƒ½å¼‚å¸¸æ’æŸ¥

```bash
# 1. æ£€æŸ¥åç«¯æ—¥å¿—
# Render Dashboard â†’ Logs â†’ æŸ¥çœ‹é”™è¯¯ä¿¡æ¯

# 2. æ£€æŸ¥ API å“åº”
curl https://api-aigcguard.zsypioneer.cn/api/watermark/detect \
  -H "Authorization: Bearer YOUR_TOKEN"

# 3. æ£€æŸ¥æ•°æ®åº“è¿æ¥
# Supabase Dashboard â†’ Database â†’ æŸ¥çœ‹è¿æ¥çŠ¶æ€

# 4. æ£€æŸ¥ DeepSeek API
curl https://api.deepseek.com/v1 \
  -H "Authorization: Bearer $DEEPSEEK_API_KEY"
```

### 8.3 å›æ»šæ“ä½œ

å¦‚æœæ›´æ–°å‡ºç°é—®é¢˜ï¼Œéœ€è¦å›æ»šï¼š

```bash
# æ–¹æ³•1ï¼šGit å›æ»š
git log --oneline -5  # æŸ¥çœ‹æäº¤å†å²
git revert HEAD       # æ’¤é”€æœ€åä¸€æ¬¡æäº¤
git push origin main  # æ¨é€ï¼Œè§¦å‘é‡æ–°éƒ¨ç½²

# æ–¹æ³•2ï¼šå¼ºåˆ¶å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬
git reset --hard <commit-hash>
git push origin main --force  # è°¨æ…ä½¿ç”¨ï¼

# æ–¹æ³•3ï¼šRender æ‰‹åŠ¨éƒ¨ç½²æ—§ç‰ˆæœ¬
# Dashboard â†’ ä½ çš„æœåŠ¡ â†’ Deploy â†’ é€‰æ‹©ä¹‹å‰çš„éƒ¨ç½²è®°å½•
```

### 8.4 ç´§æ€¥æ¢å¤æµç¨‹

```bash
# å¦‚æœæœåŠ¡å®Œå…¨ä¸å¯ç”¨

# 1. ç«‹å³æ£€æŸ¥ Render çŠ¶æ€
# Dashboard â†’ æœåŠ¡æ˜¯å¦è¿è¡Œä¸­

# 2. æ£€æŸ¥ UptimeRobot
# ç¡®è®¤æ˜¯æœåŠ¡é—®é¢˜è¿˜æ˜¯ç½‘ç»œé—®é¢˜

# 3. å¦‚æœ‰å¿…è¦ï¼Œé‡å¯æœåŠ¡
# Render Dashboard â†’ Manual Deploy â†’ Clear Build Cache & Deploy

# 4. å¦‚æœæ•°æ®åº“é—®é¢˜
# Supabase Dashboard â†’ Database â†’ æŸ¥çœ‹çŠ¶æ€
```

---

## ğŸ“ æ›´æ–°æµç¨‹é€ŸæŸ¥è¡¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ›´æ–°æ“ä½œé€ŸæŸ¥è¡¨                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. æœ¬åœ°å¼€å‘ â†’ æµ‹è¯•é€šè¿‡                                       â”‚
â”‚ 2. æ•°æ®åº“å˜æ›´ â†’ Supabase SQL Editor æ‰§è¡Œ                     â”‚
â”‚ 3. æäº¤ä»£ç  â†’ git add . â†’ git commit â†’ git push             â”‚
â”‚ 4. ç­‰å¾…è‡ªåŠ¨éƒ¨ç½² â†’ Vercel + Render                           â”‚
â”‚ 5. åŠŸèƒ½éªŒè¯ â†’ è®¿é—®é“¾æ¥æµ‹è¯•                                   â”‚
â”‚ 6. ç›‘æ§æ—¥å¿— â†’ ç¡®è®¤æ— é”™è¯¯                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ç›¸å…³æ–‡æ¡£é“¾æ¥

- [å®Œæ•´éƒ¨ç½²æŒ‡å—](./å®Œæ•´éƒ¨ç½²æŒ‡å—.md)
- [Vercel å®˜æ–¹æ–‡æ¡£](https://vercel.com/docs)
- [Render å®˜æ–¹æ–‡æ¡£](https://render.com/docs)
- [Supabase å®˜æ–¹æ–‡æ¡£](https://supabase.com/docs)

---

**é‡è¦æé†’**ï¼š
- âš ï¸ ä»»ä½•ä¿®æ”¹éƒ½è¦å…ˆåœ¨æœ¬åœ°æµ‹è¯•
- âš ï¸ æ•°æ®åº“å˜æ›´è¦è°¨æ…ï¼Œå»ºè®®å…ˆå¤‡ä»½
- âš ï¸ ç”Ÿäº§ç¯å¢ƒæ›´æ–°å»ºè®®åœ¨ä½å³°æœŸè¿›è¡Œ
- âš ï¸ ä¿æŒ `.env` æ–‡ä»¶ä¸æäº¤åˆ° Git

---

*æœ€åæ›´æ–°ï¼š2024-02-22*
